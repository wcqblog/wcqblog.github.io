---
layout: post
title:  "说一下我为什么这些天都没更新因为我在造轮子写个小的路由框架"
date:   2015-02-27 1:10:00
categories: 前端 javascript html5 单页web应用 路由
tags: Webfrontend projects
image: /assets/article_images/2015-01-25-webgl-shader/plexus.jpg
---
寒假很快就要过去了好不甘心啊=_=
为啥我寒假一开始更了挺多博客后来不更了？因为。。。我在做两个项目，还要忙着过年=_=
一个智慧校园，我就不多说了，本来处于磨练意志坚持不用jquery和插件，不过被大得吓人的需求震慑到了，先写了两个页面，一个[登陆页面](http://wungcq.github.io/static/templates/login.html)（视频背景，卡片翻转，还挺炫酷昂），一个[功能页面](http://wungcq.github.io/static/templates/login.html)，徒手撸了一个周历控件，一个滚动条控件，还有一个备忘录的控件，累感不爱。
考虑到OJ那面比较要紧，就先写写OJ的东西磨练一下意志吧=_=。经过两星期的开发，也算是基本处于可控的状态了~噢耶~

这是OJ-frontend的github链接，求多来[打脸](https://github.com/WunGCQ/OJ-frontend)

# OJ-frontend
OJ-frontend
##这是buaa online Judge 第四代的前端业务
当初本来打算用angualr

但是发现angualr太重,同志们基本学不来，而且本身的体积也很醉人，所以没有使用。

但是很喜欢写单页的web应用，因为只要处理得当，能够极大地提高用户的体验，减少服务器端的渲染压力（**我们上一个版本的OJ的性能瓶颈之一就是django页面渲染比较渣。。。**）

改用了一套自己撸的路由插件，松散地耦合了几个部分。

说一下基本实现的功能。

0.通过一个routerController来管理路由的行为，主要是页面跳转和页面之间的交互。详情可以看[这里](https://github.com/WunGCQ/OJ-frontend/blob/master/public/javascripts/Controllers/RouteController.js)
处理各个页面跳转之间的逻辑，主要是对页面元素的操作啊，逻辑等等

1.核心是jRouter这个插件，做的事情比较简单，就是在这个的原型里注册router函数等行为，作为一个控制路由的中枢，它可以扫描文档中的a标签，根据a标签的路径为它自动绑定事先已经写好的参数，当然咯，会有更多的扩展行要考虑，现在主要是做功能。

2.利用了HTML5 history API,这个大家都熟悉，就不提了。

3.同时呢，OJ很有可能会扔一个链接给别人看，所以必须支持页面的自解析，其实也不难，因为jRouter插件本身就是接收url参数的，所以只需要再onload里面添加就好，将自解析的行为封装到initPage中来。

4.一般分享的页面会是带有参数的，所以这个jRouter会轻度地支持解析参数，不过，这基于一个约定就是参数总是放在后面的，这样通过根域名后面的第一个词就给你找到你在routerController里面的控制器。

5.到这里你肯定知道a标签是不再管什么用了。。是的。。a标签都被绑上了事件。。什么事件呢？这些就是在a标签上的几个data属性记录了对应的控制器在jRouter的prototype的controller数组中的位置了~

6.再就是用了juicer模板引擎，真的很好用~~~

7.在github上面做过测试，我搭建的jekyll静态页面里面有这个网页[现在的模样](http://wungcq.github.io/public/templates/index.html)
加载的速度还是很可观的，这还是没有压缩和uglify的情况~~

8.当然既然连路由都包办了所以数据模型很重要，我基本把与服务器数据和模板打交道的活都扔给了Model.js这么个东西,其原型包含了对这个数据模型的CRUD的API路径、模板路径、模板处理等等等等~

9.然后剩下的就都交给普普通通的view的Controller啦~负责用户交互和少量不适合通过model与服务器交互的ajax任务，这样~

A.这一整套UI也是我自己撸出来的啊。。。调点CSS费了老劲，没有设计师只能再大脑中切图出图=_=。。

B.对了，还写了一个小插件，负责在页面顶端推送消息~

C.先写这么些，明天好好写写在撸这么一套体系中遇到的一些问题和对策，前提当然是我先把用户子系统和小组的子系统给写完，不过照葫芦画瓢~就是画页面不太好玩啊~

2015 2 27

D.忽然想起来了，可以试试用html5的server-sent event来做推送，比较重要的就是题目提交之后的judge情况，还有rank的变化~先记下来



另外真的真的求一个水平好一点的前端实习机会，暂时还没来得及找，上学期的那个新浪的实习机会让我给推掉了=_=...默哀...也不知道这一对localhost里面的东西能不能吸引他们
简单做一下至今为止做过的一些工作的回顾。。。
接触web前端半年多点，基本所有设计和ptu工作也是自己做的，，还是太弱了。。

> 大二的时候做的两个彩笔级别的网站就不说了。。虽然有些地方还是挺好看的。。

> N个响应式的展示页面，有用到bootstrap的，也有没用到的。

> 一个可以拖拽的瀑布流布局还带响应式的web app,用jquery撸的。。

>俺的个人主页 [wungcq.github.io](http://wungcq.github.io)，总觉的这个网页只能说明我P图水平还尚可=_=

>俺的博客，我才开始写没多久。。不过我会加油的~~

>一个写了半道的tzk，跟着实验室的学长和szm一起做的，主要是修改一下前端的东西。。。虽然感觉改丑了。。。但是还是添加了一些比较复杂的东西，也是第一次和学长们一起在阿里云主机ssh上面做协作。。。当时还没有mac，win下putty又极不方便，要上传文件还得换系统，总之很麻烦。。

>系统分析与设计，第一次认识ROR，配环境很痛苦，写coffee还OK，就是心塞地发现对coffee的选择器支持比单纯地plainjs好，基础了一些SCSS，less这类，不过跟CSS差异不大，大同小异基本没啥感觉。中间也是借用这个开发了一些个小的插件，什么警告窗啊，什么自定义的模态框控件啊这样。不过封装地实在不咋地。。
现在想想两个月前的水平也就那回事。。不过写了一个很赞的逻辑严谨没有错误的日期的区间的选择控件。。。自打那之后日期类得心应手=_=

>一个跟weng学长接的外边的活，要求做个勉强能用的在线商店，要求模仿魅族商城，我们估计了一下规模，用裸的php和jq花了两天半写完了。。一人一千五，现在应该还有五百没下来。托管在SAE上，[链接在这里](http://www.swdown.com)

>然后认识完学长就该认识学弟了，经过浩神的邀请来做智慧校园。。。就不多说了，一大帮年轻有为的学弟，简直完爆我大一大二的生活=.=,那时的我还只会写写简单的算法，拿java或者C#抡个日程管理程序什么的。。。

>随着对frontend的深入探索(就这么短)，以及轮子哥等大大们的影响，对造轮子有了深入地兴趣，并且通过造轮子掌握和理解了js方方面面的知识，以及浏览器兼容性啊这些小细节。

>然后就是jRouter了。。。自己撸的一个轻量级路由框架，当然连设计模式都没学就写这玩意肯定很烂，但是毕竟实现了造轮子梦想，成功使得网页有了构建，主要代码不再是操作DOM咯（心塞）

>创新杯想起来还没搞，要做一个机遇webgl的数据可视化。。。感觉略难，项目略多要流产。。看运气吧。。

>实际上现在对canvasUI更感兴趣了，因为DOM的16ms的渲染速度无法带来真正流畅的跨设备的体验，所以。。canvasUI很需要。。虽然react有了一个canvasUI，但是自己造乐趣多~~想法是看看能不能扩展到那个webgl中，直接就是大的canvasUI。。啥都是canvas~

>忽然觉得对不起branny，我现在想起来貌似他寒假之前就找我来着。。但是。。期末实在太忙太虐心了=_=。。而且实习的时候我不能说给一个荷兰的公司做过soho=_=。。还是接地气比较好。

>鉴于要全面发展，决定开学之后有时间学swift~

以上。。明天有空更一些js的技术细节吧=_=
